<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ProgramÄƒri PoliÈ›ie</title>
  <style>
    body{font-family:'Segoe UI',sans-serif;background:#0a0a0a;color:#fff;margin:0;display:flex;min-height:100vh;align-items:center;justify-content:center}
    .wrap{width:92%;max-width:520px;background:#151515;padding:32px;border-radius:16px;box-shadow:0 0 28px rgba(255,215,0,.25);border:1px solid rgba(255,215,0,.25)}
    h2{text-align:center;color:#ffd700;margin:0 0 18px;text-transform:uppercase;letter-spacing:.5px;text-shadow:0 0 8px #ffd700}
    label{display:block;margin-top:12px;font-weight:600;color:#ddd}
    input,textarea{width:100%;margin-top:6px;padding:12px;border-radius:10px;border:1px solid rgba(255,215,0,.3);background:#0f0f0f;color:#fff}
    textarea{resize:none;height:100px}
    input::placeholder,textarea::placeholder{color:#888}
    button{margin-top:18px;width:100%;padding:13px;border-radius:12px;border:0;background:linear-gradient(135deg,#ffd700,#ffa500);color:#111;font-weight:800;text-transform:uppercase;box-shadow:0 0 15px rgba(255,215,0,.6);cursor:pointer}
    button:hover{transform:scale(1.02)}
    #msg{margin-top:14px;text-align:center;font-weight:700}
    .footer{margin-top:18px;text-align:center;color:#ffd700;opacity:.8;font-size:13px}
  </style>
</head>
<body>
  <div class="wrap">
    <h2>ðŸ“‹ ProgramÄƒri PoliÈ›ie</h2>

    <!-- Honeypot anti-bot (invizibil) -->
    <input type="text" id="hp_field" style="display:none">

    <label>ID-ul TÄƒu</label>
    <input id="id" maxlength="10" required placeholder="37987">

    <label>Numele TÄƒu IC</label>
    <input id="nume" maxlength="50" required placeholder="Borgov Dimitri"

    <label>Discordul TÄƒu</label>
    <input id="discord" maxlength="50" required placeholder="Laur70">

    <label>Telefon</label>
    <input id="telefon" maxlength="15" placeholder="0712 345 678">

    <label>MenÈ›iuni</label>
    <textarea id="mentiuni" maxlength="300" placeholder="Aplic pentru testul ANP, disponibil 20:00â€“21:00."></textarea>

    <button id="send" type="button">âœ… ProgrameazÄƒ-te</button>
    <div id="msg"></div>

    <div class="footer">Â© OGLand RomÃ¢nia â€” Made by Laur70</div>
  </div>

<script>
  const API_URL = "https://script.google.com/macros/s/AKfycbw69xTh-194gWEzCjne7a991pVIwUn7UvfhpSM6xeFvJJ8mwwIK_h8SWLfcMXeNECFs/exec";

  function show(t, ok=false){
    document.getElementById("msg").innerHTML =
      `<span style="color:${ok?'lime':'#ff6b6b'}">${t}</span>`;
  }

  document.getElementById("send").addEventListener("click", async () => {
    const data = {
      id:       document.getElementById("id").value.trim(),
      nume:     document.getElementById("nume").value.trim(),
      discord:  document.getElementById("discord").value.trim(),
      telefon:  document.getElementById("telefon").value.trim(),
      mentiuni: document.getElementById("mentiuni").value.trim(),
      hp_field: document.getElementById("hp_field")?.value || ""
    };

    if (!/^\d{3,10}$/.test(data.id))  return show("âš ï¸ ID invalid");
    if (!(data.nume.length>=2 && data.nume.length<=50)) return show("âš ï¸ Nume invalid");

    try {
      show("â³ Trimitâ€¦");
      const resp = await fetch(API_URL, {
        method: "POST",
        headers: { "Content-Type": "text/plain" }, // evitÄƒ CORS preflight
        body: JSON.stringify(data)
      });

      console.log("POST â†’ Apps Script:", resp.type, resp.status);
      // Ã®ncercÄƒm sÄƒ citim rÄƒspunsul (poate fi blocat de CORS; nu e grav)
      let okResp = false;
      try {
        const json = await resp.json();
        console.log("Server JSON:", json);
        okResp = json && json.ok;
      } catch(e) {
        console.log("JSON read blocked by CORS (ok).");
      }

      if (resp.ok || okResp) {
        show("âœ” FelicitÄƒri, ai fost programat! AÈ™teaptÄƒ sÄƒ fii contactat.", true);
      } else {
        show("âŒ Server Apps Script indisponibil.");
      }
    } catch (err) {
      console.error("Network error:", err);
      show("âŒ Nu s-a putut trimite. VerificÄƒ API_URL / conexiunea.");
    }
  });
</script>
</body>
</html>
